<app-navbar></app-navbar>
<router-outlet></router-outlet>
<div *ngIf="router.url === '/easygarden'" 
      class="div-wrapper table-wrapper"
      (click)="clearInput()">

  <div>
    <h1>{{title}}</h1>
    <div class="iconContainer">
      <div class="circle"></div>
      <fa-icon [icon]="faTree" class="iconCategory"></fa-icon>
    </div>

    <div class="divSearch">
      <div class="inputSearch">
        <input id="inputSearch"
               type="text" 
               class="fas fa-search"
               [(ngModel)]="searchInput.name"
               placeholder="Rechercher...">
        <fa-icon [icon]="faSearch" class="icon"></fa-icon>
      </div>
    </div>

    <div class="table form-border form-shadow">
      <table class="t-hover">
  
        <thead>             
          <tr>
            <th (click)="sort('name')" class="order">Nom 
              <fa-icon [icon]="faSort"></fa-icon>
            </th>
            <th (click)="sort('pseudo')" class="order">Utilisateur 
              <fa-icon [icon]="faSort"></fa-icon>
            </th>
            <th>Action</th>                   
          </tr>
        </thead>
  
        <tbody>
          <ng-container *ngFor="let user of users">
            <tr *ngFor="let garden of user.garden
                        | paginate: { itemsPerPage: 3, currentPage: p } 
                        | orderBy: orderHeader: isDescOrder
                        | filterBy: searchInput">
              <td>{{ garden.name }}</td>
              <td>{{ user.pseudo }}</td>
              <td>
                <button type="button"
                        aria-label="Modifier"
                        matTooltip="Modifier"
                        matTooltipPosition="before"
                        matTooltipShowDelay="500"
                        routerLink="/easygarden/garden/{{garden.id}}">
                  <fa-icon [icon]="faPen"></fa-icon>
                </button>
                <button type="submit" class="trash"
                        aria-label="Supprimer"                  
                        matTooltip="Supprimer"
                        matTooltipPosition="after"
                        matTooltipShowDelay="500"
                        (click)="confirmDialog(garden.id, garden.name)">
                  <fa-icon [icon]="faTrash"></fa-icon>
                </button>
              </td>
            </tr>
            <!-- <div *ngIf="(gardens | filterBy: searchInput).lenght === 0">Aucune correspondance trouv√©e..</div> -->
          </ng-container>
        </tbody>
  
      </table>
    </div>
  </div>

  <div class="pagination">
    <pagination-controls (pageChange)="p = $event" 
                         previousLabel="" 
                         nextLabel=""
                         [autoHide]="true"
                         [responsive]="true"
                         aria-label="Pagination">
    </pagination-controls>
  </div>

  <ng-container *ngFor="let user of users">
    <div class="submit">
      <button type="button" 
              id="submit" 
              class="button-shadow"
              routerLink="/easygarden/add/{{user.id}}">Ajouter</button>
    </div>
  </ng-container>
</div>
